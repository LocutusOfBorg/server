#
# Initialization
#
SELECT THREAD_ID INTO @def_thread_id FROM performance_schema.threads
WHERE PROCESSLIST_ID = CONNECTION_ID();
connect  con2, localhost, root,,;
connect  con1, localhost, root,,;
set time_zone= '+10:00';
SELECT THREAD_ID INTO @con1_thread_id FROM performance_schema.threads
WHERE PROCESSLIST_ID = CONNECTION_ID();
SELECT thread_id = @con1_thread_id as current, variable_value
FROM performance_schema.variables_by_thread
WHERE variable_name = "time_zone";
current	variable_value
0	SYSTEM
0	SYSTEM
1	+10:00
connection con2;
connection default;
#
# End of initialization
#
connection con2;
select "good";
good
good
connection con1;
set debug_sync= "my_real_read SIGNAL net WAIT_FOR pass";
connection default;
set debug_sync= "now WAIT_FOR net";
set debug_sync= "apc_after_notify SIGNAL pass";
SELECT thread_id = @def_thread_id as current, variable_value
FROM performance_schema.variables_by_thread
WHERE variable_name = "time_zone";
current	variable_value
1	SYSTEM
0	SYSTEM
0	+10:00
set debug_sync= "now SIGNAL pass";
connection con1;
connection default;
set debug_sync=reset;
